<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>魔方</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="icon" type="image/png" href="ico.png">
</head>
<body>
<canvas width="600" height="600"></canvas>
<div class="cube-wrapper"></div>
<script src="../../lib/3d-css.js"></script>
<script src="data.js"></script>
<script src="tools.js"></script>
<script src="cube.js"></script>
<script>
    (function () {

        /**todo
         * 还有3件事要做：
         * 1.实现操作的记录、能够撤销操作
         * 2.实现点位置的记录、用canvas绘制一个酷炫的开场动画
         * 3.实现黑色挡板，美观化
         * */

        initCube();

        Drag( cubeWrapper , {
            onDrag : function ( dx , dy ) {
                if ( dx || dy ) {
                    var s = ( Math.abs( dx ) + Math.abs( dy )) / 3.5;
                    var t_matrix = _3d.rotate3dM( dy , -dx , 0 , s );
                    rotateCube( t_matrix );
                }
            }
        } );

        // 点击滚轮，自动撤销上次操作
        document.body.onclick = function ( e ) {
            if ( e.which == 2 ) {
                var action = Actions.pop();
                rotateFloorAction( action.axis , action.floorNum , 0 , -action.rotateNum )
            }
        }

    })();
</script>
</body>
</html>